---
title: "Cost of Living in Toronto"
subtitle: "Are low-income families able to survive financially here?"
author: 
  - Hyunje Park
thanks: "Code and data are available at: https://github.com/davidpxrk/cost-of-living-toronto"
date: today
date-format: long
abstract: "This paper analyzes the living-cost data from low-income families living in Toronto, which is hosted publicly by the Open Data Toronto. It uses information on household income, expenses, government fiscal transfers and benefits to determine if low-income families are able to survive financially in Toronto. It was discovered that expenses exceeded income for most families (meaning low-income families were not able to make ends meet in Toronto), and rent, food costs were among the highest expenses. This finding is important as it shows cost disparity in expenses, and provide insights to fiscal policymakers on how to better support low-income families with their living costs."
format: pdf
toc: true
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false
#install.packages('opendatatoronto')
#install.packages("dplyr")
#install.packages('tidyverse')
#install.packages('sf')
#remove.packages('knitr')
#install.packages('xfun')
#install.packages('knitr')


# RUN THIS IN THE TERMINAL IF THERE'S AN ERROR IN EXPORTING TO PDF
# Source: https://stackoverflow.com/questions/75906430/why-cant-i-render-any-quarto-documents-into-pdfs
# quarto install tool tinytex

library(here)
library(knitr)
library(opendatatoronto)
library(tidyverse)
library(dplyr)
library(sf)

## Read the 2 cleaned CSV files ##
cleaned_data = read_csv(here::here('data/cleaned_data/cleaned_data.csv'))
  
cleaned_data_inverted = read_csv(here::here('data/cleaned_data/cleaned_data_inverted.csv'))
```



# Introduction

Toronto is the biggest and the most populous city in Canada. As the fourth largest city in North America, Toronto serves as a catalyst when it comes to being an international hub for many businesses, arts, sports and diverse cultures, attracting people from all around the world to come to Toronto to study at some of the best institutions, work or even simply travel as a Tourist. More importantly, Toronto is the most diverse city in Canada, with many people of different cultures, backgrounds, ethnicity coexist, and bridge cultural gaps and create a unity. 

While Toronto may seem like a perfect place to live, residents have said this to be far from the truth, with many sturggling financially to meet ends, especially for those that come from a low income background. For example, according to the Daily Bread Food Bank, one in 10 people in Toronto relied on food banks in 2023, a huge increase from one in 20 from 2022 (CITATION HERE).

According to the City of Toronto, the threshold for LIM_AT (threshold to be considered low income) was $26,503 for 1 person household, $37,480 for two person household and $53,005 for a four person household (CITATION, CITY OF TORONTO). 13.2% of Toronto's population fell under this category of low-income. Furthermore, Toronto continues to have a higher rate of low income than any other regions in the GTHA at 8.09% (CITATION HERE), highlighting an issue of income discrepancy.

This paper aims to analyze if low income families living in Toronto are financially able to survive. The analysis focuses on two different metrics; income (which includes income from employment, government benefits and transfers such as GST/HST credit, Canada Pension Plan and Canada Worker Benefits) and expense (which includes rent, childcare, food and transportation costs). The difference between income and expense can assess whether or not low-income families are able to survive, and can guide future policymakers on what areas of expenses the low-income families can get additional support.

The paper is organized as follows: Section 2 (Data) of this paper introduces the raw dataset of interest and some of the initial observations. Section 3 (Results) highlights some of the key insights that were derived from the data analysis. Section 4 (Discussion) discusses the observations from Section 3 and draws a conclusion from the findings. Finally, Section 5 (Conclusion) draws a brief summary of the key findings.

# Data

This report uses the "About Cost of living in Toronto for low-income households" (CITATION HERE) dataset, which is published publicly by the Social Development, Finance & Administration of Toronto on City of Toronto's Open Data Portal. This data contains information on income such as employment income, GST/HST credits, pension benefits and expenses such as rent, food, transportation costs for 11 different scenarios of a low-income household. The 11 different scenarios of low-income household were manually selected by the City of Toronto to reflect different household characteristics that can increase the reliance on social assistance, such as type of income, single-parent household, etc. A detailed explanation of this 11 household scenarios can be found in the Appendix. The dataset is also within a monthly time period (monthly income and monthly expenses)

The dataset was downloaded and analyzed using the R Programming Language (R Core Team 2022), opendatatoronto (CITATION HERE), knitr (CITATION HERE), tidyverse (CITATION HERE), here (CITATION), dplyr (CITATION) and sf (CITATION HERE). 

## Overview of the Dataset

The dataset published by Social Development, Finance & Administration of Toronto was last updated on August 2024 on an annual basis. However, the dataset uses price estimates from July 2022 - July 2023 for its income and expenses of families. The variables chosen for this analysis were the 11 households, for each entry of the income and expense types. See Table 1 for an overview.

```{r}
#| label: low-income-families
#| fig-cap: "Table 1: Sample of the Income/Expenses of Low Income Households in Toronto"
#| echo: false

# PREVIEW OF THE DATA
cleaned_data[, 1:5] %>% head() %>% knitr::kable()
```

It is also to note that there were differing datasets based on different rent estimates. The dataset for rent prices using Toronto Regional Real Estate Board Market Rent was chosen. Furthermore, there were several entries in the dataset that were irrelevant, such as percentage of rent on income, which were filtered out.

## Average Income of the 11 Households

By far, income from employment was the major income source for all the 11 households in Toronto, at approximately $1603 per month. This number also falls shy below the "low-income" threshold set by the City of Toronto, which is approximately $2208.5 (CITY OF TORONTO CITATION). See Table 2 for a sample of the dataset. 

```{r}
#| label: low-income-families
#| fig-cap: "Table 2: Average Income of Low Income Households in Toronto"
#| echo: false

avg_income <- filter(cleaned_data, Category == "Income")

# take the average
avg_income$"Average Income in $" <- rowMeans(subset(avg_income, select = c("Household_1",
                                                                           "Household_2",
                                                                           "Household_3",
                                                                           "Household_4",
                                                                           "Household_5",
                                                                           "Household_6",
                                                                           "Household_7",
                                                                           "Household_8",
                                                                           "Household_9",
                                                                           "Household_10",
                                                                           "Household_11"
                                                                           )))
avg_income <- avg_income %>% select("Item", "Average Income in $")

# rename the columns to something more presentable
colnames(avg_income) <- c("Type of Income", "Average Income in $")

#round to the nearest integer
avg_income$"Average Income in $" <- round(avg_income$"Average Income in $", 0)

avg_income %>% head() %>% knitr::kable()
```

The numbers may not add up as they were rounded to the nearest whole number.

## Average Expenses of the 11 Households

There is a huge price disparity between the expenses of the 11 families. The biggest expense was 
```{r}
#| label: low-income-families
#| fig-cap: "Table 3: Average Expenses of Low Income Households in Toronto"
#| echo: false

avg_expense <- filter(cleaned_data, Category == "Employment Deduction" |
                                    Category == "Selected Expenses")

# take the average of the expenses
avg_expense$"Average Expense in $" <- rowMeans(subset(avg_expense, select = c("Household_1",
                                                                           "Household_2",
                                                                           "Household_3",
                                                                           "Household_4",
                                                                           "Household_5",
                                                                           "Household_6",
                                                                           "Household_7",
                                                                           "Household_8",
                                                                           "Household_9",
                                                                           "Household_10",
                                                                           "Household_11"
                                                                           )))
avg_expense <- avg_expense %>% select("Item", "Average Expense in $")

# rename the columns to something more presentable
colnames(avg_expense) <- c("Type of Income", "Average Expense in $")

#round to the nearest integer
avg_expense$"Average Expense in $" <- round(avg_expense$"Average Expense in $", 0)

# absolute value (because employment insurance is relative to income)
avg_expense$"Average Expense in $" <- abs(avg_expense$"Average Expense in $") 
avg_expense %>% head() %>% knitr::kable()


```
## Difference between Income and Expense
```{r}
#| label: low-income-families
#| fig-cap: "Table 4: Average Expenses of Low Income Households in Toronto"
#| echo: false


income_expense_merged <- cleaned_data_inverted 

cleaned_data_inverted

income_expense_merged <- income_expense_merged %>% select("Total Income", "Total Expenses", "Remaining Funds")

income_expense_merged  %>% knitr::kable()
```

# Results
```{r}
#| label: low-income-families
#| fig-cap: "Table 5: Average Expenses of Low Income Households in Toronto"
#| echo: false

data <- data.frame(
  Household = c("Household_1", "Household_2", "Household_3", "Household_4", 
                "Household_5", "Household_6", "Household_7", "Household_8", 
                "Household_9", "Household_10", "Household_11"),
  Income = income_expense_merged$"Total Income",
  Expenses = income_expense_merged$"Total Expenses"
)

data_long <- data %>%
  pivot_longer(cols = c(Income, Expenses), 
               names_to = "Type", 
               values_to = "Amount")


ggplot(data_long, aes(x = Household, y = Amount, fill = Type)) +
  geom_bar(stat = "identity", position = "dodge") +
  labs(title = "Total Income vs Total Expenses for Each Household", 
       x = "Household", 
       y = "Amount") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))


```
```{r}
#| label: low-income-families
#| fig-cap: "Table 6: Average Expenses of Low Income Households in Toronto"
#| echo: false

expense_disparity <- head(avg_expense, 6)
avg_expense
pie(expense_disparity$'Average Expense in $', expense_disparity$'Type of Income')

```
# Discussion

# Conclusion

# Appendix

# Statement on LLMs 

LLMs and other generative AI tools were not used in the making of this paper.

# References

https://www.toronto.ca/wp-content/uploads/2022/07/9877-City-Planning-2021-Census-Backgrounder-Families-Hhlds-Marital-Status-Income.pdf

https://www.dailybread.ca/wp-content/uploads/2023/11/DB-WhosHungryReport-2023-Digital.pdf



